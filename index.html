<!DOCTYPE html>
<html>
<head>
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
    <script src="//code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="//code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
</head>

<body>
<!-- Start of first page -->
<div data-role="page" id="foo">

    <div data-role="header">
        <h1>Top cities</h1>
    </div><!-- /header -->

    <div data-role="content">

        <table data-role="table" data-mode="columntoggle" class="ui-responsive">
            <thead id="top-header">

            </thead>
            <tbody id="top-data">
            </tbody>

        </table>


    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->

<script>


    $(function(){
        var requestData = { page:0 };
        $.get('http://new.1100ad.com/en/android/top', requestData)
                .done(function(data) {
                    drawTable(data);
                });
    });

    function refreshData() {
        var requestData = { page:0 };

        $.get('http://new.1100ad.com/en/android/top', requestData)
                .done(function(data) {
                    console.log(data);
                });
    }

    function drawTable(data){
        topHeaderIsSet = false;
        var topHeader = $("<tr></tr>");
        $.each(data, function (key, value) {

            var row = $('<tr></tr>').addClass('topRow').css('cursor', 'pointer');
            $.each(value, function(k,v){

                if( k == 'topName' || k == 'sideName' || k == 'integer') {

                } else {
                    if(topHeaderIsSet == false) {
                        $('<th></th>').html(k).appendTo(topHeader);
                    }

                    $('<td></td>').html(v).appendTo(row);

                }
            });

            if(topHeaderIsSet == false) {
                topHeader.appendTo("#top-header");
                topHeaderIsSet = true;
            }

            row.appendTo($("#top-data"));
        });
    }
</script>

</body>
</html>